<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokédex Explorer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #ff5350;
            --secondary-color: #3761a8;
            --accent-color: #ffcb05;
            --light-color: #f5f5f5;
            --dark-color: #2a2a2a;
            --grass: #78c850;
            --fire: #f08030;
            --water: #6890f0;
            --bug: #a8b820;
            --normal: #a8a878;
            --poison: #a040a0;
            --electric: #f8d030;
            --ground: #e0c068;
            --fairy: #ee99ac;
            --fighting: #c03028;
            --psychic: #f85888;
            --rock: #b8a038;
            --ghost: #705898;
            --ice: #98d8d8;
            --dragon: #7038f8;
            --dark: #705848;
            --steel: #b8b8d0;
            --flying: #a890f0;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--light-color);
            min-height: 100vh;
            padding-bottom: 40px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            padding: 20px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .logo {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .logo i {
            font-size: 2.5rem;
            color: var(--accent-color);
            margin-right: 15px;
            filter: drop-shadow(2px 2px 2px rgba(0, 0, 0, 0.5));
        }

        .logo h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 2.8rem;
            font-weight: 700;
            letter-spacing: 1px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .search-container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-box {
            display: flex;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .search-box input {
            flex: 1;
            border: none;
            padding: 18px 25px;
            font-size: 1.1rem;
            outline: none;
            background: transparent;
        }

        .search-box button {
            background: var(--accent-color);
            color: var(--dark-color);
            border: none;
            padding: 0 30px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .search-box button:hover {
            background: #ffd700;
        }

        main {
            padding: 40px 0;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .filter-section {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .filter-label {
            font-weight: 500;
            font-size: 1.1rem;
        }

        .type-filter {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .type-btn {
            padding: 8px 16px;
            border-radius: 20px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .type-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
        }

        .type-btn.active {
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2), 0 0 0 3px rgba(255, 255, 255, 0.3);
        }

        .results-info {
            font-size: 1.2rem;
            text-align: center;
            margin-bottom: 30px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .pokemon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .pokemon-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .pokemon-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .card-header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .pokemon-id {
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .pokemon-name {
            font-family: 'Poppins', sans-serif;
            font-size: 1.6rem;
            font-weight: 600;
            text-transform: capitalize;
        }

        .pokemon-image {
            height: 180px;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }

        .pokemon-image img {
            height: 100%;
            filter: drop-shadow(5px 5px 5px rgba(0, 0, 0, 0.5));
            transition: all 0.3s ease;
        }

        .pokemon-card:hover .pokemon-image img {
            transform: scale(1.1);
        }

        .pokemon-types {
            display: flex;
            gap: 10px;
            padding: 15px 20px;
            justify-content: center;
        }

        .type-badge {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .pokemon-stats {
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.2);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .stat {
            text-align: center;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .stat-value {
            font-weight: 600;
            font-size: 1.1rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            overflow-y: auto;
            padding: 20px;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .modal-content {
            background: linear-gradient(135deg, #2a2a3e 0%, #1e1e2e 100%);
            width: 100%;
            max-width: 900px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            position: relative;
            margin-top: 40px;
            margin-bottom: 40px;
        }

        .modal-header {
            padding: 25px 30px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2.2rem;
            text-transform: capitalize;
        }

        .modal-id {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--accent-color);
        }

        .close-modal {
            background: var(--primary-color);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            background: #ff3835;
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 768px) {
            .modal-body {
                grid-template-columns: 1fr;
            }
        }

        .modal-image-section {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .modal-image {
            width: 100%;
            max-width: 300px;
            margin-bottom: 20px;
        }

        .modal-image img {
            width: 100%;
            filter: drop-shadow(5px 5px 10px rgba(0, 0, 0, 0.5));
        }

        .modal-types {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            justify-content: center;
        }

        .modal-info-section {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .info-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
        }

        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--accent-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            font-size: 1.2rem;
        }

        .abilities-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .ability {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            text-transform: capitalize;
        }

        .hidden-ability {
            background: rgba(255, 203, 5, 0.2);
            border: 1px solid var(--accent-color);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-name {
            font-weight: 500;
            text-transform: capitalize;
        }

        .stat-bar-container {
            width: 60%;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
        }

        .stat-bar {
            height: 100%;
            border-radius: 5px;
        }

        .stat-value-modal {
            width: 40px;
            text-align: right;
            font-weight: 600;
        }

        .moves-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            max-height: 200px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .move {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            text-transform: capitalize;
        }

        .move-level {
            font-weight: 600;
            color: var(--accent-color);
            margin-right: 5px;
        }

        .evolution-chain {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .evolution-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .evolution-item:hover {
            transform: translateY(-5px);
        }

        .evolution-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.1);
            margin-bottom: 10px;
        }

        .evolution-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .evolution-name {
            font-weight: 500;
            text-transform: capitalize;
        }

        .evolution-arrow {
            color: var(--accent-color);
            font-size: 1.5rem;
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.5rem;
            display: none;
        }

        .loading.active {
            display: block;
        }

        .loading i {
            color: var(--accent-color);
            margin-right: 10px;
        }

        .error {
            text-align: center;
            padding: 40px;
            background: rgba(255, 0, 0, 0.1);
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .error.active {
            display: block;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
        }

        .page-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .page-btn:hover:not(:disabled) {
            background: #4a7fd4;
            transform: translateY(-3px);
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-info {
            font-size: 1.1rem;
        }

        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .type-filter {
                justify-content: center;
            }
            
            .pokemon-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .logo h1 {
                font-size: 2.2rem;
            }
            
            .modal-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .pokemon-grid {
                grid-template-columns: 1fr;
            }
            
            .logo h1 {
                font-size: 1.8rem;
            }
            
            .search-box input {
                padding: 15px 20px;
                font-size: 1rem;
            }
            
            .modal-content {
                margin-top: 10px;
                margin-bottom: 10px;
            }
            
            .modal-body {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-dragon"></i>
                    <h1>Pokédex Explorer</h1>
                </div>
                <p class="tagline">Search and discover your favorite Pokémon</p>
                <div class="search-container">
                    <div class="search-box">
                        <input type="text" id="search-input" placeholder="Search Pokémon by name or ID (e.g., Pikachu or 25)">
                        <button id="search-btn"><i class="fas fa-search"></i> Search</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="controls">
            <div class="filter-section">
                <span class="filter-label">Filter by type:</span>
                <div class="type-filter" id="type-filter">
                    <!-- Type buttons will be generated by JavaScript -->
                </div>
            </div>
            <button id="reset-btn" class="type-btn" style="background: var(--dark-color);">Reset Filters</button>
        </div>
        
        <div class="results-info" id="results-info">
            Showing 20 Pokémon
        </div>
        
        <div class="loading" id="loading">
            <i class="fas fa-spinner fa-spin"></i> Loading Pokémon...
        </div>
        
        <div class="error" id="error">
            <i class="fas fa-exclamation-triangle"></i> <span id="error-text">Error loading Pokémon data</span>
        </div>
        
        <div class="pokemon-grid" id="pokemon-grid">
            <!-- Pokémon cards will be inserted here by JavaScript -->
        </div>
        
        <div class="pagination">
            <button id="prev-btn" class="page-btn" disabled>
                <i class="fas fa-chevron-left"></i> Previous
            </button>
            <span class="page-info" id="page-info">Page 1 of 65</span>
            <button id="next-btn" class="page-btn">
                Next <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </main>
    
    <!-- Pokemon Detail Modal -->
    <div class="modal" id="pokemon-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div>
                    <h2 class="modal-title" id="modal-name">Pikachu</h2>
                    <div class="modal-id" id="modal-id">#025</div>
                </div>
                <button class="close-modal" id="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="modal-image-section">
                    <div class="modal-image" id="modal-image">
                        <img src="" alt="Pokemon">
                    </div>
                    <div class="modal-types" id="modal-types">
                        <!-- Type badges will be inserted here -->
                    </div>
                </div>
                
                <div class="modal-info-section">
                    <div class="info-section">
                        <h3 class="section-title"><i class="fas fa-info-circle"></i> Basic Info</h3>
                        <div class="basic-info">
                            <div class="stat-item">
                                <span class="stat-name">Height</span>
                                <span class="stat-value-modal" id="modal-height">0.4 m</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-name">Weight</span>
                                <span class="stat-value-modal" id="modal-weight">6.0 kg</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-name">Base Experience</span>
                                <span class="stat-value-modal" id="modal-exp">112</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3 class="section-title"><i class="fas fa-star"></i> Abilities</h3>
                        <div class="abilities-list" id="modal-abilities">
                            <!-- Abilities will be inserted here -->
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3 class="section-title"><i class="fas fa-chart-bar"></i> Stats</h3>
                        <div class="stats-grid" id="modal-stats">
                            <!-- Stats will be inserted here -->
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3 class="section-title"><i class="fas fa-bolt"></i> Moves (First 10)</h3>
                        <div class="moves-list" id="modal-moves">
                            <!-- Moves will be inserted here -->
                        </div>
                    </div>
                    
                    <div class="info-section">
                        <h3 class="section-title"><i class="fas fa-link"></i> Evolution Chain</h3>
                        <div class="evolution-chain" id="modal-evolution">
                            <!-- Evolution chain will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer class="container">
        <p>Pokédex Explorer © 2023 | Data from <a href="https://pokeapi.co/" style="color: var(--accent-color);">PokeAPI</a> | Not affiliated with Nintendo or The Pokémon Company</p>
    </footer>

    <script>
        // DOM elements
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const pokemonGrid = document.getElementById('pokemon-grid');
        const loading = document.getElementById('loading');
        const error = document.getElementById('error');
        const errorText = document.getElementById('error-text');
        const resultsInfo = document.getElementById('results-info');
        const typeFilter = document.getElementById('type-filter');
        const resetBtn = document.getElementById('reset-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const pageInfo = document.getElementById('page-info');
        
        // Modal elements
        const modal = document.getElementById('pokemon-modal');
        const closeModal = document.getElementById('close-modal');
        const modalName = document.getElementById('modal-name');
        const modalId = document.getElementById('modal-id');
        const modalImage = document.getElementById('modal-image');
        const modalTypes = document.getElementById('modal-types');
        const modalHeight = document.getElementById('modal-height');
        const modalWeight = document.getElementById('modal-weight');
        const modalExp = document.getElementById('modal-exp');
        const modalAbilities = document.getElementById('modal-abilities');
        const modalStats = document.getElementById('modal-stats');
        const modalMoves = document.getElementById('modal-moves');
        const modalEvolution = document.getElementById('modal-evolution');

        // Pokemon type colors mapping
        const typeColors = {
            grass: 'var(--grass)',
            fire: 'var(--fire)',
            water: 'var(--water)',
            bug: 'var(--bug)',
            normal: 'var(--normal)',
            poison: 'var(--poison)',
            electric: 'var(--electric)',
            ground: 'var(--ground)',
            fairy: 'var(--fairy)',
            fighting: 'var(--fighting)',
            psychic: 'var(--psychic)',
            rock: 'var(--rock)',
            ghost: 'var(--ghost)',
            ice: 'var(--ice)',
            dragon: 'var(--dragon)',
            dark: 'var(--dark)',
            steel: 'var(--steel)',
            flying: 'var(--flying)'
        };

        // Stat colors for bars
        const statColors = {
            hp: '#FF5959',
            attack: '#F5AC78',
            defense: '#FAE078',
            'special-attack': '#9DB7F5',
            'special-defense': '#A7DB8D',
            speed: '#FA92B2'
        };

        // App state
        let currentPage = 1;
        let totalPages = 65; // Based on 1300 Pokémon / 20 per page
        let currentTypeFilter = 'all';
        let pokemonData = [];
        let displayedPokemon = [];
        let currentPokemonDetail = null;

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            initializeTypeFilters();
            loadPokemon();
            
            // Event listeners
            searchBtn.addEventListener('click', handleSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleSearch();
            });
            resetBtn.addEventListener('click', resetFilters);
            prevBtn.addEventListener('click', () => changePage(-1));
            nextBtn.addEventListener('click', () => changePage(1));
            
            // Modal event listeners
            closeModal.addEventListener('click', () => {
                modal.classList.remove('active');
            });
            
            // Close modal when clicking outside
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
            
            // Close modal with Escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && modal.classList.contains('active')) {
                    modal.classList.remove('active');
                }
            });
        });

        // Initialize type filter buttons
        function initializeTypeFilters() {
            const types = Object.keys(typeColors);
            
            // Create "All" button
            const allButton = document.createElement('button');
            allButton.className = 'type-btn active';
            allButton.textContent = 'All';
            allButton.style.background = 'var(--primary-color)';
            allButton.dataset.type = 'all';
            allButton.addEventListener('click', () => filterByType('all'));
            typeFilter.appendChild(allButton);
            
            // Create buttons for each type
            types.forEach(type => {
                const button = document.createElement('button');
                button.className = 'type-btn';
                button.textContent = type.charAt(0).toUpperCase() + type.slice(1);
                button.style.background = typeColors[type];
                button.dataset.type = type;
                button.addEventListener('click', () => filterByType(type));
                typeFilter.appendChild(button);
            });
        }

        // Load Pokémon data from PokeAPI
        async function loadPokemon() {
            showLoading();
            hideError();
            
            try {
                // Calculate offset based on current page (20 per page)
                const offset = (currentPage - 1) * 20;
                
                // Fetch list of Pokémon for current page
                const response = await fetch(`https://pokeapi.co/api/v2/pokemon?limit=20&offset=${offset}`);
                const data = await response.json();
                
                // Fetch detailed data for each Pokémon
                const detailedPokemon = await Promise.all(
                    data.results.map(async (pokemon) => {
                        const pokemonResponse = await fetch(pokemon.url);
                        return pokemonResponse.json();
                    })
                );
                
                pokemonData = detailedPokemon;
                displayedPokemon = detailedPokemon;
                
                updatePokemonGrid();
                updateResultsInfo();
                updatePagination();
                hideLoading();
            } catch (err) {
                showError('Failed to load Pokémon data. Please try again.');
                hideLoading();
                console.error(err);
            }
        }

        // Update the Pokémon grid with current data
        function updatePokemonGrid() {
            pokemonGrid.innerHTML = '';
            
            if (displayedPokemon.length === 0) {
                pokemonGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; font-size: 1.2rem;">No Pokémon found matching your search.</div>';
                return;
            }
            
            displayedPokemon.forEach(pokemon => {
                const pokemonCard = createPokemonCard(pokemon);
                pokemonGrid.appendChild(pokemonCard);
            });
        }

        // Create a Pokémon card element
        function createPokemonCard(pokemon) {
            const card = document.createElement('div');
            card.className = 'pokemon-card';
            
            // Get Pokémon ID with leading zeros
            const pokemonId = pokemon.id.toString().padStart(3, '0');
            
            // Get primary type for styling
            const primaryType = pokemon.types[0].type.name;
            
            // Create card content
            card.innerHTML = `
                <div class="card-header">
                    <span class="pokemon-id">#${pokemonId}</span>
                    <h3 class="pokemon-name">${pokemon.name}</h3>
                </div>
                <div class="pokemon-image">
                    <img src="${pokemon.sprites.other['official-artwork'].front_default || pokemon.sprites.front_default}" alt="${pokemon.name}">
                </div>
                <div class="pokemon-types">
                    ${pokemon.types.map(typeInfo => {
                        const typeName = typeInfo.type.name;
                        return `<span class="type-badge" style="background: ${typeColors[typeName]}">${typeName}</span>`;
                    }).join('')}
                </div>
                <div class="pokemon-stats">
                    <div class="stat">
                        <div class="stat-label">Height</div>
                        <div class="stat-value">${pokemon.height / 10}m</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Weight</div>
                        <div class="stat-value">${pokemon.weight / 10}kg</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">HP</div>
                        <div class="stat-value">${pokemon.stats[0].base_stat}</div>
                    </div>
                </div>
            `;
            
            // Add click event to show detailed modal
            card.addEventListener('click', () => {
                showPokemonDetail(pokemon);
            });
            
            return card;
        }

        // Show detailed modal for a Pokémon
        async function showPokemonDetail(pokemon) {
            showLoading();
            currentPokemonDetail = pokemon;
            
            try {
                // Update basic info
                modalName.textContent = pokemon.name;
                modalId.textContent = `#${pokemon.id.toString().padStart(3, '0')}`;
                
                // Update image
                const img = modalImage.querySelector('img') || document.createElement('img');
                img.src = pokemon.sprites.other['official-artwork'].front_default || pokemon.sprites.front_default;
                img.alt = pokemon.name;
                if (!modalImage.querySelector('img')) {
                    modalImage.appendChild(img);
                }
                
                // Update types
                modalTypes.innerHTML = '';
                pokemon.types.forEach(typeInfo => {
                    const typeName = typeInfo.type.name;
                    const typeBadge = document.createElement('span');
                    typeBadge.className = 'type-badge';
                    typeBadge.textContent = typeName;
                    typeBadge.style.background = typeColors[typeName];
                    modalTypes.appendChild(typeBadge);
                });
                
                // Update basic stats
                modalHeight.textContent = `${pokemon.height / 10} m`;
                modalWeight.textContent = `${pokemon.weight / 10} kg`;
                modalExp.textContent = pokemon.base_experience || 'N/A';
                
                // Update abilities
                modalAbilities.innerHTML = '';
                pokemon.abilities.forEach(abilityInfo => {
                    const ability = document.createElement('span');
                    ability.className = `ability ${abilityInfo.is_hidden ? 'hidden-ability' : ''}`;
                    ability.textContent = abilityInfo.ability.name.replace('-', ' ');
                    if (abilityInfo.is_hidden) {
                        ability.title = 'Hidden Ability';
                    }
                    modalAbilities.appendChild(ability);
                });
                
                // Update stats with bars
                modalStats.innerHTML = '';
                pokemon.stats.forEach(statInfo => {
                    const statItem = document.createElement('div');
                    statItem.className = 'stat-item';
                    
                    const statName = document.createElement('span');
                    statName.className = 'stat-name';
                    statName.textContent = statInfo.stat.name.replace('-', ' ');
                    
                    const statBarContainer = document.createElement('div');
                    statBarContainer.className = 'stat-bar-container';
                    
                    const statBar = document.createElement('div');
                    statBar.className = 'stat-bar';
                    const statValue = statInfo.base_stat;
                    const percentage = Math.min(100, (statValue / 255) * 100);
                    statBar.style.width = `${percentage}%`;
                    statBar.style.background = statColors[statInfo.stat.name] || '#4a90e2';
                    
                    const statValueElement = document.createElement('span');
                    statValueElement.className = 'stat-value-modal';
                    statValueElement.textContent = statValue;
                    
                    statBarContainer.appendChild(statBar);
                    statItem.appendChild(statName);
                    statItem.appendChild(statBarContainer);
                    statItem.appendChild(statValueElement);
                    modalStats.appendChild(statItem);
                });
                
                // Update moves (first 10)
                modalMoves.innerHTML = '';
                const movesToShow = pokemon.moves.slice(0, 10);
                movesToShow.forEach(moveInfo => {
                    const move = document.createElement('span');
                    move.className = 'move';
                    
                    // Check if move is learned by level-up
                    const levelUpMethod = moveInfo.version_group_details.find(
                        detail => detail.move_learn_method.name === 'level-up'
                    );
                    
                    if (levelUpMethod) {
                        move.innerHTML = `<span class="move-level">Lv.${levelUpMethod.level_learned_at}</span> ${moveInfo.move.name.replace('-', ' ')}`;
                    } else {
                        move.textContent = moveInfo.move.name.replace('-', ' ');
                    }
                    
                    modalMoves.appendChild(move);
                });
                
                // Fetch and display evolution chain
                await updateEvolutionChain(pokemon.species.url);
                
                // Show the modal
                modal.classList.add('active');
                hideLoading();
            } catch (err) {
                console.error('Error loading Pokémon details:', err);
                hideLoading();
            }
        }

        // Fetch and display evolution chain
        async function updateEvolutionChain(speciesUrl) {
            try {
                // Fetch species data
                const speciesResponse = await fetch(speciesUrl);
                const speciesData = await speciesResponse.json();
                
                // Fetch evolution chain data
                const evolutionResponse = await fetch(speciesData.evolution_chain.url);
                const evolutionData = await evolutionResponse.json();
                
                // Parse evolution chain
                const evolutionChain = [];
                let currentEvolution = evolutionData.chain;
                
                while (currentEvolution) {
                    // Get Pokémon ID from URL
                    const pokemonId = currentEvolution.species.url.split('/').filter(Boolean).pop();
                    
                    // Fetch basic Pokémon data for image
                    const pokemonResponse = await fetch(`https://pokeapi.co/api/v2/pokemon/${pokemonId}`);
                    const pokemonData = await pokemonResponse.json();
                    
                    evolutionChain.push({
                        name: currentEvolution.species.name,
                        id: pokemonId,
                        image: pokemonData.sprites.other['official-artwork'].front_default || pokemonData.sprites.front_default
                    });
                    
                    // Move to next evolution
                    currentEvolution = currentEvolution.evolves_to[0];
                }
                
                // Display evolution chain
                modalEvolution.innerHTML = '';
                
                if (evolutionChain.length <= 1) {
                    modalEvolution.innerHTML = '<p>This Pokémon does not evolve.</p>';
                    return;
                }
                
                evolutionChain.forEach((pokemon, index) => {
                    // Add evolution item
                    const evolutionItem = document.createElement('div');
                    evolutionItem.className = 'evolution-item';
                    
                    // Add click event to load this Pokémon's details
                    evolutionItem.addEventListener('click', async () => {
                        showLoading();
                        try {
                            const pokemonResponse = await fetch(`https://pokeapi.co/api/v2/pokemon/${pokemon.id}`);
                            const pokemonData = await pokemonResponse.json();
                            showPokemonDetail(pokemonData);
                        } catch (err) {
                            console.error('Error loading evolution Pokémon:', err);
                            hideLoading();
                        }
                    });
                    
                    const evolutionImage = document.createElement('div');
                    evolutionImage.className = 'evolution-image';
                    
                    const img = document.createElement('img');
                    img.src = pokemon.image;
                    img.alt = pokemon.name;
                    evolutionImage.appendChild(img);
                    
                    const evolutionName = document.createElement('div');
                    evolutionName.className = 'evolution-name';
                    evolutionName.textContent = pokemon.name;
                    
                    evolutionItem.appendChild(evolutionImage);
                    evolutionItem.appendChild(evolutionName);
                    modalEvolution.appendChild(evolutionItem);
                    
                    // Add arrow between evolutions (except after the last one)
                    if (index < evolutionChain.length - 1) {
                        const arrow = document.createElement('div');
                        arrow.className = 'evolution-arrow';
                        arrow.innerHTML = '<i class="fas fa-arrow-right"></i>';
                        modalEvolution.appendChild(arrow);
                    }
                });
            } catch (err) {
                console.error('Error loading evolution chain:', err);
                modalEvolution.innerHTML = '<p>Evolution data not available.</p>';
            }
        }

        // Handle search functionality
        async function handleSearch() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            if (!searchTerm) {
                // If search is empty, reset to current page
                resetFilters();
                return;
            }
            
            showLoading();
            hideError();
            
            try {
                // Check if search is a number (ID) or string (name)
                let searchUrl;
                if (!isNaN(searchTerm)) {
                    // Search by ID
                    searchUrl = `https://pokeapi.co/api/v2/pokemon/${parseInt(searchTerm)}`;
                } else {
                    // Search by name
                    searchUrl = `https://pokeapi.co/api/v2/pokemon/${searchTerm}`;
                }
                
                const response = await fetch(searchUrl);
                
                if (!response.ok) {
                    throw new Error('Pokémon not found');
                }
                
                const pokemon = await response.json();
                
                // Display only the searched Pokémon
                pokemonData = [pokemon];
                displayedPokemon = [pokemon];
                currentTypeFilter = 'all';
                
                updateTypeFilterButtons();
                updatePokemonGrid();
                updateResultsInfo(`Search result for "${searchTerm}"`);
                updatePagination(true); // Disable pagination for search results
                hideLoading();
            } catch (err) {
                showError(`Pokémon "${searchTerm}" not found. Try another name or ID.`);
                hideLoading();
            }
        }

        // Filter Pokémon by type
        function filterByType(type) {
            currentTypeFilter = type;
            
            // Update active state of filter buttons
            updateTypeFilterButtons();
            
            if (type === 'all') {
                displayedPokemon = pokemonData;
            } else {
                displayedPokemon = pokemonData.filter(pokemon => 
                    pokemon.types.some(t => t.type.name === type)
                );
            }
            
            updatePokemonGrid();
            updateResultsInfo();
        }

        // Update active state of type filter buttons
        function updateTypeFilterButtons() {
            const buttons = typeFilter.querySelectorAll('.type-btn');
            buttons.forEach(button => {
                if (button.dataset.type === currentTypeFilter) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
        }

        // Reset all filters and show all Pokémon
        function resetFilters() {
            searchInput.value = '';
            currentTypeFilter = 'all';
            updateTypeFilterButtons();
            loadPokemon();
        }

        // Change page for pagination
        function changePage(direction) {
            const newPage = currentPage + direction;
            
            if (newPage < 1 || newPage > totalPages) {
                return;
            }
            
            currentPage = newPage;
            loadPokemon();
        }

        // Update pagination controls
        function updatePagination(isSearch = false) {
            if (isSearch) {
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                pageInfo.textContent = "Search Results";
            } else {
                prevBtn.disabled = currentPage === 1;
                nextBtn.disabled = currentPage === totalPages;
                pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
            }
        }

        // Update results info text
        function updateResultsInfo(customText = null) {
            if (customText) {
                resultsInfo.textContent = customText;
                return;
            }
            
            if (currentTypeFilter === 'all') {
                resultsInfo.textContent = `Showing ${displayedPokemon.length} Pokémon`;
            } else {
                resultsInfo.textContent = `Showing ${displayedPokemon.length} ${currentTypeFilter} type Pokémon`;
            }
        }

        // Show/hide loading indicator
        function showLoading() {
            loading.classList.add('active');
        }

        function hideLoading() {
            loading.classList.remove('active');
        }

        // Show/hide error message
        function showError(message) {
            errorText.textContent = message;
            error.classList.add('active');
        }

        function hideError() {
            error.classList.remove('active');
        }
    </script>
</body>
</html>